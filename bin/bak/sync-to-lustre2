#! /bin/bash
set -e

src_dir="/Share/home/shibinbin/projects/exSeek-dev"
dest_dir="/lulab/lustre2/shibinbin/projects/exSeek"
RSYNC="rsync -rav -R --delete"
cd $src_dir

for d in "genome" "igv" "bin";do
    $RSYNC "$d" "$dest_dir"
done
for dataset in `ls "$src_dir/output"`;do
    [ -d "$dest_dir/output/$dataset" ] || mkdir -p "$dest_dir/output/$dataset"
    if [ -d "output/$dataset/bigwig" ];then
        $RSYNC "output/$dataset/bigwig" "$dest_dir"
    fi
    if [ -d "output/$dataset/tbigwig" ];then
        $RSYNC "output/$dataset/tbigwig" "$dest_dir"
    fi
done
